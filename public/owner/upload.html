<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Upload Movie</title>
  <style>body{font-family:sans-serif;padding:2rem} form{max-width:480px}</style>
</head>
<body>
  <h1>Upload Movie (Owner Only)</h1>
  <form method="POST" action="/owner/upload" enctype="multipart/form-data">
    <label>Choose video file<br><input type="file" name="movie" accept="video/*" required></label><br><br>
    <button type="submit">Upload</button>
  </form>
  <p><a href="/movies.html">View movies</a></p>
  <hr>
  <h2>Uploaded movies</h2>
  <ul id="list"></ul>
  <script src="/script.js"></script>
  <script>
    async function refresh(){
      const res = await fetch('/api/movies');
      const movies = await res.json();
      const ul = document.getElementById('list'); ul.innerHTML='';
      movies.forEach(m => { const li = document.createElement('li'); li.innerHTML = `<a href="/watch.html?file=${encodeURIComponent(m.name)}">${m.name}</a>`; ul.appendChild(li); });
    }
    refresh();
    setInterval(refresh, 5000);
  </script>
</body>
</html>